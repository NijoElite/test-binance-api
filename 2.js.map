{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/components/Table/Table.jsx","webpack:///./src/components/Table/Table.scss?b3f4","webpack:///./src/components/Table/Table.scss","webpack:///./src/libs/helpers/index.js","webpack:///./src/features/Diff/Diff.scss?981b","webpack:///./src/features/Diff/Diff.scss","webpack:///./src/features/Diff/Diff.jsx"],"names":["arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","module","exports","arr","arrayLikeToArray","Array","isArray","iter","Symbol","iterator","Object","from","TypeError","cnTable","cn","Table","children","className","restProps","TableHead","TableHeadCell","TableRow","TableCell","color","align","borderLeft","borderRight","borderBottom","borderTop","TableBody","api","content","__esModule","default","i","options","locals","___CSS_LOADER_API_IMPORT___","push","formatNumber","str","fractionDigits","isNaN","Number","toFixed","cnDiff","reducer","diffs","action","type","asks","newDiffs","slice","bids","Diff","props","binance","core","getPlugin","bus","symbols","getAvailableSymbols","useState","symbol","setSymbol","useReducer","dispatchDiffUpdate","useEffect","trigger","onDiffUpdate","useCallback","addEventListener","removeEventListener","onSymbolChange","e","target","value","enabled","mapDiffsToRows","data","prev","price","amountDiff","next","key","num","fixedNum","formatDiffNumber","asksDiffs","map","bidsDiffs","getHead","title","colSpan","onChange","displayName"],"mappings":"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","file":"2.js","sourcesContent":["var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","import React from 'react';\nimport { cn } from '@bem-react/classname';\n\nimport './Table.scss';\n\nconst cnTable = cn('Table');\n\nexport const Table = ({ children, className, ...restProps }) => {\n  return (\n    <div className={cnTable(null, [className])} {...restProps}>\n      <table className={cnTable('Root')}>\n        {children}\n      </table>\n    </div>\n  );\n};\n\nexport const TableHead = ({ children, ...restProps }) => {\n  return <thead className={cnTable('Head')} {...restProps}> {children}</thead>;\n};\n\nexport const TableHeadCell = ({ children, ...restProps }) => {\n  return <th className={cnTable('HeadCell')} {...restProps}>{children}</th>;\n};\n\nexport const TableRow = ({ children, ...restProps }) => {\n  return <tr className={cnTable('Row')} {...restProps}>{children}</tr>;\n};\n\nexport const TableCell = ({ children, color, align = 'center', borderLeft, borderRight, borderBottom, borderTop, ...restProps }) => {\n  return <td className={cnTable('Cell', { color, align, borderLeft, borderRight, borderBottom, borderTop })} {...restProps}>{children}</td>;\n};\n\nexport const TableBody = ({ children, ...restProps }) => {\n  return <tbody className={cnTable('Body')} {...restProps}>{children}</tbody>;\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./Table.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Table-Root{width:100%;border-collapse:collapse;table-layout:fixed}.Table-Row{height:30px}.Table-Head .Table-Row:last-child{border:2px solid #1e1e1e}.Table-HeadCell{font-size:16px;font-weight:bold}.Table-Cell{padding:10px;font-size:14px;font-weight:normal;overflow-x:hidden}.Table-Cell_align_center{text-align:center}.Table-Cell_align_left{text-align:left}.Table-Cell_align_right{text-align:right}.Table-Cell_borderRight{border-right:2px solid #1e1e1e}.Table-Cell_borderLeft{border-left:2px solid #1e1e1e}.Table-Cell_color_red{color:#f84960}.Table-Cell_color_green{color:#02c076}@media screen and (max-width: 600px){.Table-Cell{padding:4px;overflow-x:scroll}.Table-Cell::-webkit-scrollbar{width:0;height:0}.Table-Cell::-webkit-scrollbar-thumb{display:block}.Table-Cell::-webkit-scrollbar-track{background:transparent}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export const formatNumber = (str, fractionDigits) => !isNaN(str) ? Number(str).toFixed(fractionDigits) : '';\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./Diff.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Diff-ListsContainer{display:flex;justify-content:space-between}.Diff{max-height:100%;overflow-x:hidden;overflow-y:auto}.Diff-SymbolContainer{display:flex;justify-content:center;margin:20px 0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import React, { useState, useCallback, useEffect, useReducer } from 'react';\nimport core from '../../libs/core/core';\nimport { cn } from '@bem-react/classname';\nimport { Table, TableHead, TableRow, TableHeadCell, TableBody, TableCell } from '../../components/Table/Table';\nimport { formatNumber } from '../../libs/helpers';\n\nimport './Diff.scss';\n\nconst cnDiff = cn('Diff');\n\nconst reducer = (diffs, action) => {\n  switch (action.type) {\n    case 'append': {\n      const asks = [...action.newDiffs.asks, ...diffs.asks].slice(0, 100);\n      const bids = [...action.newDiffs.bids, ...diffs.bids].slice(0, 100);\n      return { asks, bids };\n    }\n    case 'clear':\n      return { asks: [], bids: [] };\n  }\n};\n\nconst formatDiffNumber = (num, fractionDigits) => {\n  const fixedNum = formatNumber(num, fractionDigits);\n  return (num < 0 ? fixedNum : `+${fixedNum}`);\n};\n\nconst Diff = props => {\n  const binance = core.getPlugin('binance');\n  const bus = core.getPlugin('bus');\n  const symbols = binance.getAvailableSymbols();\n\n  const [symbol, setSymbol] = useState(symbols[0]);\n  const [diffs, dispatchDiffUpdate] = useReducer(reducer, { asks: [], bids: [] });\n\n  const fractionDigits = 8;\n\n  useEffect(() => {\n    bus.trigger('symbol:change', symbol);\n    dispatchDiffUpdate({ type: 'clear' });\n  }, [bus, symbol]);\n\n  const onDiffUpdate = useCallback(newDiffs => {\n    dispatchDiffUpdate({\n      type: 'append',\n      newDiffs,\n    });\n  }, []);\n\n  useEffect(() => {\n    bus.addEventListener('diff:update', onDiffUpdate);\n    return () => bus.removeEventListener('diff:update', onDiffUpdate);\n  }, [bus, onDiffUpdate]);\n\n  const onSymbolChange = useCallback(e => {\n    setSymbol(e.target.value);\n  }, []);\n\n  if (!props.enabled) return null;\n\n  const mapDiffsToRows = (data, i) => {\n    const [price, prevAmout] = data.prev;\n    const [, nextAmout] = data.next;\n    const amountDiff = (prevAmout || 0) - (nextAmout || 0);\n\n    return (\n      <TableRow key={i}>\n        <TableCell>{formatNumber(price, fractionDigits)}</TableCell>\n        <TableCell align=\"center\" color={amountDiff > 0 ? 'green' : 'red'}>{formatDiffNumber(amountDiff, fractionDigits)}</TableCell>\n      </TableRow>\n    );\n  };\n\n  const asksDiffs = diffs.asks.map(mapDiffsToRows);\n  const bidsDiffs = diffs.bids.map(mapDiffsToRows);\n\n  const getHead = title => {\n    return (\n      <TableHead>\n        <TableRow>\n          <TableHeadCell colSpan=\"2\">{title}</TableHeadCell>\n        </TableRow>\n        <TableRow>\n          <TableHeadCell>Price</TableHeadCell>\n          <TableHeadCell>Amount Diff</TableHeadCell>\n        </TableRow>\n      </TableHead>\n    );\n  };\n\n  return (\n    <div className={cnDiff()}>\n      <div className={cnDiff('SymbolContainer')}>\n        <label>\n          <span>Select New Symbol: </span>\n          <select onChange={onSymbolChange} value={symbol}>\n            {symbols.map(symbol => <option key={symbol} value={symbol}>{symbol}</option>)}\n          </select>\n        </label>\n      </div>\n\n      <div className={cnDiff('ListsContainer')}>\n        <Table>\n          {getHead('Bids')}\n          <TableBody>\n            {bidsDiffs}\n          </TableBody>\n        </Table>\n\n        <Table>\n          {getHead('Asks')}\n          <TableBody>\n            {asksDiffs}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nDiff.displayName = 'Diff';\n\nexport default Diff;\n"],"sourceRoot":""}